---
title: Next Broken Links
description: Une cli qui dÃ©tectes les liens invalides dans un site Next.js
datePublished: 2025-04-13
---

tldr: [https://github.com/Vahor/next-broken-links](https://github.com/Vahor/next-broken-links)

# Pourquoi?

Jâ€™ai migrÃ© du contenu Markdown dâ€™un site vers un autre : il y avait quasiment 50 pages diffÃ©rentes.  
Et chaque page a bien sÃ»r changÃ© dâ€™URL.

...Donc tous les liens entre ces pages Ã©taient maintenant invalides.

Regarder chaque page, trouver les liens et les mettre Ã  jour Ã  la main allait Ãªtre fastidieux.  
Du coup, je me suis dit quâ€™automatiser une partie serait pas mal.  
Et je suis sÃ»r quâ€™un outil ne va pas rater de liens.

# Comment Ã§a marche?

Mettre Ã  jour les liens automatiquement nâ€™est pas faisable : la CLI nâ€™a pas lâ€™information de ce qui doit remplacer lâ€™URL incorrecte.  
Mais ce qui est dÃ©jÃ  suffisant, câ€™est dâ€™avoir une liste de liens invalides. Puis de faire un `sed` pour les remplacer.

```bash
bun install -D @vahor/next-broken-links
```

```bash
bunx @vahor/next-broken-links --domain vahor.fr 
```

Et voilÃ  c'est fait.

```bash
âœ” Parsed next config
âœ” Extracted links from all pages
âœ” Checked links
âœ– error Found 44 broken links
    archive/changelog/1.34.0.html: /docs/api/reference/limitations
    archive/changelog/1.36.0.html: /docs/api/howtos-and-examples/analyze/data-dictionary.mdx#download-response
    archive/changelog/1.36.0.html: /docs/api/howtos-and-examples/analyze/data-dictionary.mdx#parameters
    archive/changelog/1.37.0.html: /docs/api/howtos-and-examples/analyze/data-dictionary.mdx#download-response
    archive/changelog/1.37.0.html: /docs/api/howtos-and-examples/documents/batch-translation
    archive/changelog/1.37.0.html: /docs/api/reference/language-support#translation
    [...]
```

44 liens invalides trouvÃ©s instantanÃ©ment.

Yâ€™a plus quâ€™Ã  corriger les liens avec un ðŸª„ `find . -name "*.tsx" -exec sed -i 's@broken-link@correct-link@g' {} \;`
<small>(ou un search-and-replace dans lâ€™IDE)</small>

Faire ce script nâ€™a pas pris beaucoup de temps, et je vais pouvoir le rÃ©utiliser pour nâ€™importe quel autre projet.
Voire mÃªme lâ€™ajouter comme check dans une CI pour mâ€™assurer que les nouvelles pages restent Ã  jour.

Aussi, je ne me limite pas aux liens internes : la CLI regarde aussi le sitemap, ainsi que les liens vers les images ou autres assets.
