---
title: n8n-kit
description: G√©n√©rer et d√©ployer des workflows n8n avec du code TypeScript.
datePublished: 2025-09-02
---

tldr: [https://github.com/Vahor/n8n-kit](https://github.com/Vahor/n8n-kit)

# Pourquoi cet outil ?

Faire des workflows n8n √† la main c'est bien, mais quand on est plusieurs √† travailler dessus, c'est compliqu√©.
Il faut faire des copies, lorsqu'on a termin√©, merger les JSONs, les diffs sont horribles.

Lorsqu'on ajoute √† √ßa le fait que le workflow contient des dizaines de n≈ìuds, la page devient longue √† charger, on ne s'y retrouve plus.

Si on veut g√©rer un environnement de pr√©-production et un de production, les mises en prod sont toutes manuelles et il est tr√®s facile de faire une erreur.


√Ä c√¥t√© de √ßa on conna√Æt des outils comme aws cdk, terraform, o√π on peut d√©crire les ressources et les g√©rer avec du code. G√©rer les environnements est tr√®s simple, merger deux branches est aussi facile.

Du coup j'ai cherch√© s'il existait un outil de ce type pour n8n, mais je n'ai rien trouv√©. C'est pourquoi j'ai cr√©√© **n8n-kit**.

# La solution

**n8n-kit** permet de cr√©er des workflows n8n avec du code TypeScript, avec du typage automatique.

```typescript
// Une application contient tous les workflows
const app = new App();

// Les credentials ne peuvent pas √™tre cr√©√©es par l'api, mais on peut quand m√™me les typer
const nasaCredentials = Credentials.byId({
    name: "nasaApi", // cette partie est typ√©e, ici nasaCredentials est de type NasaApiCredentials. Si un n≈ìud attend un autre type il y a une erreur
    id: "credential-id", // id du credential sur n8n, ici on va utiliser une variable d'env
});

new Workflow(app, "my-workflow", {
    active: true,
    name: "Super workflow",
    definition: [
        Chain.start(
            new ScheduleTrigger("schedule", {
                label: "Schedule trigger",
                parameters: {
                    rule: {
                        interval: [{
                            field: "weeks",
                            triggerAtDay: [1],
                            triggerAtHour: 9,
                            weeksInterval: 1,
                        }],
                    },
                },
            }),
        )
        .next(({ $ }) =>
            new If("if", {
                parameters: {
                    conditions: {
                        conditions: [{
                            operator: { type: "string", operation: "contains" },
                            // Ici json.timestamp vient du type de sortie du n≈ìud ScheduleTrigger. Si on utilise un autre n≈ìud ou une autre cl√©, il y a une erreur
                            leftValue: $("schedule.timestamp"), // Lors du build ce sera remplac√© par ={{ $('Schedule trigger').item.json.timestamp }}
                            rightValue: "C", // L√† l'exemple n'a aucun sens
                        }],
                    },
                },
            })
            .true(
                new PostBin("alert", {
                    parameters: {
                         // On a aussi des m√©thodes typ√©es comme toLowerCase() => ={{ $('Schedule trigger').item.schedule.timestamp.toLowerCase() }}
                        binContent: expr`TimeStamp ${$("schedule.timestamp").toLowerCase()}`,
                    },
                }),
            )
        ),
    ],
});
```

üéâ Types automatiques, auto-compl√©tion parfaite

## G√©n√©ration automatique des types

Une partie int√©ressante du projet : **tous les n≈ìuds n8n sont g√©n√©r√©s automatiquement depuis le code source officiel**.

Le script de g√©n√©ration :
1. Clone le repository n8n officiel
2. Cr√©e une instance du n≈ìud
3. Extrait les propri√©t√©s int√©ressantes
4. G√©n√®re du code TypeScript √† partir des propri√©t√©s

```typescript
// Exemple de types g√©n√©r√©s automatiquement
export interface HttpRequestV3NodeParameters {
    /**
     * The request method to use
     * Default: "GET"
     */
    readonly method?: "DELETE" | "GET" | "HEAD" | "OPTIONS" | "PATCH" | "POST" | "PUT";

    /** The URL to make the request to */
    readonly url?: string;

    ...
}
```

Note: Chaque propri√©t√© a le bon type, bon nom mais aussi une description.

### Pourquoi c'est cool

Actuellement n8n contient **600+** n≈ìuds, les ajouter manuellement et les mettre √† jour en m√™me temps qu'eux serait impossible.

Mais aussi faire le clone, lancer le script et commiter manuellement c'est pas tr√®s pratique, donc cette partie est aussi automatis√©e par un [job schedul√© sur GitHub Actions](https://github.com/Vahor/n8n-kit/blob/main/.github/workflows/automatic-n8n-update.yml).

Donc en soi, rien √† faire, les n≈ìuds sont automatiquement g√©n√©r√©s et ajout√©s au repo. Plus qu'√† valider les PRs automatiques et release.


## Autres trucs int√©ressants

- Un `--watch` est disponible pour d√©ployer un workflow en temps r√©el
- Sur n8n chaque n≈ìud a une position dans le graphe, en utilisant [dagre](https://github.com/dagrejs/dagre) ces n≈ìuds sont automatiquement plac√©s.
- Comparer un JSON depuis n8n est impossible, chaque n≈ìud a une position, un id g√©n√©r√© automatiquement et plein d'autres propri√©t√©s qui rendent un diff impossible √† lire. La cli ajoute une commande `diff` qui fait le nettoyage n√©cessaire, trie les propri√©t√©s et ne montre que ce qui a r√©ellement chang√©.

# Installation

```bash
npm install @vahor/n8n-kit @vahor/n8n-kit-cli
```

